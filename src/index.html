<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CycleStrat - Advanced Betting System</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-chart-line"></i>
                    <h1>CycleStrat</h1>
                </div>
                <div class="header-stats">
                    <!-- Session Controls moved to header -->
                    <div class="session-controls-header" id="sessionControlsHeader" style="display: none;">
                        <!-- Session Time Display -->
                        <div class="session-time-header">
                            <div class="session-time-info-header">
                                <div class="session-time-value-header" id="sessionDurationHeader">00:00:00</div>
                                <div class="session-time-label-header">Session Duration</div>
                            </div>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="session-actions-header">
                            <button class="btn btn-icon session-btn" id="pauseSessionHeader" title="Pause/Resume Session">
                                <i class="fas fa-pause"></i>
                            </button>
                            <button class="btn btn-icon session-btn" id="saveSessionHeader" title="Save Session">
                                <i class="fas fa-save"></i>
                            </button>
                            <button class="btn btn-icon session-btn" id="exportStatsHeader" title="Export Statistics">
                                <i class="fas fa-download"></i>
                            </button>
                        </div>
                    </div>

                    <div class="cloud-status" id="cloudStatus">
                        <i class="fas fa-cloud-slash" title="Not connected"></i>
                    </div>
                    <button class="btn btn-icon" id="themeToggle" title="Toggle Dark Theme">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button class="btn btn-icon" id="analyticsBtn" title="Performance Analytics">
                        <i class="fas fa-chart-bar"></i>
                    </button>
                    <button class="btn btn-icon" id="bankrollBtn" title="Bankroll Manager">
                        <i class="fas fa-wallet"></i>
                    </button>
                    <button class="btn btn-icon" id="authBtn" title="Sign In" style="display: none;">
                        <i class="fas fa-user"></i>
                    </button>
                    <button class="btn btn-icon header-settings" id="openSettings" title="Settings">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Session Setup Panel -->
            <section class="panel session-panel">
                <div class="panel-header">
                    <h2><i class="fas fa-cog"></i> Session Configuration</h2>
                    <div class="panel-actions">
                        <button class="btn btn-icon" id="collapseSetup">
                            <i class="fas fa-chevron-up"></i>
                        </button>
                    </div>
                </div>
                <div class="panel-content" id="setupContent">
                    <!-- Session Management -->
                    <div class="config-section">
                        <h3>Session Management</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="sessionName">Session Name</label>
                                <input type="text" id="sessionName" placeholder="My Casino Session">
                            </div>
                            <div class="form-group">
                                <label for="casinoName">Casino</label>
                                <input type="text" id="casinoName" placeholder="Enter casino name">
                            </div>
                            <div class="form-group">
                                <label for="gameType">Game Type</label>
                                <select id="gameType">
                                    <option value="roulette">Roulette</option>
                                    <option value="baccarat">Baccarat</option>
                                    <option value="blackjack">Blackjack</option>
                                    <option value="craps">Craps</option>
                                    <option value="mines">MINES</option>
                                    <option value="dice">DICE</option>
                                    <option value="limbo">LIMBO</option>
                                    <option value="crash">CRASH</option>
                                    <option value="flip">FLIP</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="savedSessions">Load Session</label>
                                <select id="savedSessions">
                                    <option value="">Select a saved session...</option>
                                </select>
                            </div>
                        </div>
                        <div class="button-group">
                            <button class="btn btn-secondary" id="newSession">
                                <i class="fas fa-plus"></i> New Session
                            </button>
                            <button class="btn btn-secondary" id="loadSession" disabled>
                                <i class="fas fa-folder-open"></i> Load Session
                            </button>
                            <button class="btn btn-danger" id="deleteSession" disabled>
                                <i class="fas fa-trash"></i> Delete Session
                            </button>
                        </div>
                    </div>

                    <!-- Betting Configuration -->
                    <div class="config-section">
                        <h3>Betting Configuration</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="selectedPot">Select Gaming Pot (Optional)</label>
                                <select id="selectedPot" class="form-control">
                                    <option value="">Manual Bankroll Entry</option>
                                </select>
                                <small class="help-text">Choose a pot from Bankroll Manager or enter manually below</small>
                            </div>
                            <div class="form-group">
                                <label for="startingBankroll">Starting Bankroll ($)</label>
                                <input type="number" id="startingBankroll" value="1000" min="1" step="0.01">
                            </div>
                            <div class="form-group">
                                <label for="profitGoal">Profit Goal ($)</label>
                                <input type="number" id="profitGoal" value="100" min="1" step="0.01">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="useProfitPercentage">
                                    Use percentage
                                </label>
                                <input type="number" id="profitPercentage" value="10" min="0.1" step="0.1" disabled>
                            </div>
                            <div class="form-group">
                                <label for="stopLoss">Stop Loss ($)</label>
                                <input type="number" id="stopLoss" value="50" min="1" step="0.01">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="useStopLossPercentage">
                                    Use percentage
                                </label>
                                <input type="number" id="stopLossPercentage" value="5" min="0.1" step="0.1" disabled>
                            </div>
                            <div class="form-group">
                                <label for="minimumBet">Minimum Bet ($)</label>
                                <input type="number" id="minimumBet" value="0.25" min="0.01" step="0.01">
                            </div>
                            <div class="form-group">
                                <label for="numberOfCycles">Number of Cycles</label>
                                <input type="number" id="numberOfCycles" value="1" min="1" step="1">
                            </div>
                        </div>

                        <!-- Even Money Checkbox -->
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="evenMoney" checked>
                                Even Money Bets (1:1 payout)
                            </label>
                        </div>

                        <!-- Risk/Reward Multiplier (for non-even money bets) -->
                        <div class="form-group" id="riskRewardGroup" style="display: none;">
                            <label for="riskRewardMultiplier">Risk/Reward Multiplier</label>
                            <input type="number" id="riskRewardMultiplier" value="0.5" min="0.01" step="0.01">
                            <small class="form-hint" id="betTypeInfo">0.5 = dozens/columns (2:1 odds), 2 = single numbers (35:1 odds)</small>
                        </div>

                        <!-- Multi-Entry Loss Distribution (for non-even money bets with low RR) -->
                        <div class="form-group" id="multiEntryGroup" style="display: none;">
                            <label class="checkbox-label">
                                <input type="checkbox" id="useMultiEntryLossDistribution">
                                Multi-Entry Loss Distribution
                            </label>
                            <small class="form-hint">Splits loss recovery into multiple smaller entries (available for non-even bets with RR &lt; 1)</small>
                        </div>

                        <div class="button-group">
                            <button class="btn btn-primary btn-large" id="startSession">
                                <i class="fas fa-play"></i> Start Session
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Side-by-side layout for Betting and Sequence panels -->
            <div class="main-panels-grid" id="mainPanelsGrid" style="display: none;">
                <!-- Betting Panel -->
                <section class="panel betting-panel" id="bettingPanel">
                    <div class="panel-header">
                        <h2><i class="fas fa-dice"></i> Place Your Bet</h2>
                    </div>
                    <div class="panel-content">
                        <!-- Risk Warning inside betting panel -->
                        <div class="risk-warning" id="riskWarning" style="display: none;">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span id="riskWarningText"></span>
                        </div>
                        
                        <div class="bet-info">
                            <div class="bet-amount">
                                <span class="bet-label">Next Bet Size</span>
                                <span class="bet-value" id="nextBetSize">$0</span>
                            </div>
                            <div class="desired-profit">
                                <span class="profit-label">Desired Profit</span>
                                <span class="profit-value" id="desiredProfit">$0</span>
                            </div>
                        </div>
                        <div class="betting-actions">
                            <button class="btn btn-success btn-large" id="betWin">
                                <i class="fas fa-check-circle"></i>
                                Win
                            </button>
                            <button class="btn btn-danger btn-large" id="betLoss">
                                <i class="fas fa-times-circle"></i>
                                Loss
                            </button>
                            <button class="btn btn-warning" id="splitEntry">
                                <i class="fas fa-cut"></i>
                                Split Last Entry
                            </button>
                        </div>
                        
                        <!-- Copy to Clipboard Option -->
                        <div class="betting-options">
                            <label class="checkbox-label">
                                <input type="checkbox" id="copyToClipboard" checked>
                                Auto-copy bet size to clipboard
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="autoSave" checked>
                                Auto-save after each bet
                            </label>
                        </div>
                    </div>
                </section>

                <!-- Sequence Display Panel -->
                <section class="panel sequence-panel" id="sequencePanel">
                    <div class="panel-header">
                        <h2><i class="fas fa-list-ol"></i> Cycle Sequences</h2>
                        <div class="panel-actions">
                            <div class="sequence-controls">
                                <button class="btn btn-small" id="sortCurrentCycle" title="Sort current cycle from lowest to highest">
                                    <i class="fas fa-sort-numeric-up"></i> Sort
                                </button>
                                <button class="btn btn-small" id="reshuffleCycles" title="Reshuffle remaining cycles into new equal-sum cycles">
                                    <i class="fas fa-random"></i> Reshuffle
                                </button>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="autoSort" title="Automatically sort sequence after each bet">
                                    <span class="checkmark"></span>
                                    Auto Sort
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="autoReshuffle" title="Automatically reshuffle cycles when profit threshold is reached">
                                    <span class="checkmark"></span>
                                    Auto Reshuffle
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="panel-content">
                        <!-- Cycle Information Display -->
                        <div class="cycle-info" id="cycleInfo" style="display: none;">
                            <div class="cycle-stats">
                                <div class="stat-item">
                                    <span class="stat-label">Current Cycle Sum:</span>
                                    <span class="stat-value" id="currentCycleSum">$0.00</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Remaining Cycles:</span>
                                    <span class="stat-value" id="remainingCycles">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Cycle Starting Sum:</span>
                                    <span class="stat-value" id="cycleStartingSum">$0.00</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Reshuffle Threshold:</span>
                                    <span class="stat-value" id="reshuffleThreshold">$0.00</span>
                                </div>
                            </div>
                            <div class="auto-reshuffle-settings" id="autoReshuffleSettings" style="display: none;">
                                <div class="setting-group">
                                    <label for="reshuffleMultiplier">Multiplier:</label>
                                    <input type="number" id="reshuffleMultiplier" min="1" max="20" step="0.5" value="5" title="Multiplier for reshuffle threshold calculation">
                                </div>
                                <div class="setting-group">
                                    <label for="reshuffleBehavior">Reshuffle Behavior:</label>
                                    <select id="reshuffleBehavior" title="Choose how to reshuffle cycles">
                                        <option value="multiple">Create Multiple Cycles</option>
                                        <option value="single">Create One More Cycle</option>
                                        <option value="specific">Create Specific Number of Cycles</option>
                                        <option value="additional">Add Additional Cycles</option>
                                    </select>
                                </div>
                                <div class="setting-group" id="reshuffleCycleCountGroup" style="display: none;">
                                    <label for="reshuffleCycleCount">Number of Cycles:</label>
                                    <input type="number" id="reshuffleCycleCount" min="1" max="100" step="1" value="5" title="Number of cycles to create when auto-reshuffling">
                                </div>
                                <div class="setting-group" id="reshuffleAdditionalCountGroup" style="display: none;">
                                    <label for="reshuffleAdditionalCount">Additional Cycles:</label>
                                    <input type="number" id="reshuffleAdditionalCount" min="1" max="50" step="1" value="2" title="Number of additional cycles to add to remaining cycles">
                                </div>
                            </div>
                        </div>
                        <div class="sequence-container" id="sequenceContainer">
                            <!-- Sequences will be dynamically generated here -->
                        </div>
                    </div>
                </section>
            </div>

            <!-- Live Stats Panel -->
            <section class="panel live-stats-panel full-width-panel" id="liveStatsPanel" style="display: none;">
                <div class="panel-header">
                    <h2><i class="fas fa-chart-area"></i> Live Stats</h2>
                    <div class="panel-actions">
                        <button class="btn btn-icon" id="refreshStats">
                            <i class="fas fa-sync"></i>
                        </button>
                        <button class="btn btn-icon" id="collapseLiveStats">
                            <i class="fas fa-chevron-up"></i>
                        </button>
                    </div>
                </div>
                <div class="panel-content" id="liveStatsContent">
                    <div class="live-stats-grid">
                        <div class="live-stat-card balance">
                            <div class="live-stat-icon">
                                <i class="fas fa-wallet"></i>
                            </div>
                            <div class="live-stat-info">
                                <div class="live-stat-label">Current Balance</div>
                                <div class="live-stat-value" id="currentBalance">$0</div>
                            </div>
                        </div>
                        <div class="live-stat-card cycle-profit">
                            <div class="live-stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="live-stat-info">
                                <div class="live-stat-label">Cycle Profit</div>
                                <div class="live-stat-value" id="cycleProfit">$0</div>
                            </div>
                        </div>
                        <div class="live-stat-card cycle">
                            <div class="live-stat-icon">
                                <i class="fas fa-sync-alt"></i>
                            </div>
                            <div class="live-stat-info">
                                <div class="live-stat-label">Current Cycle</div>
                                <div class="live-stat-value" id="currentCycle">1</div>
                            </div>
                        </div>
                        <div class="live-stat-card risk">
                            <div class="live-stat-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="live-stat-info">
                                <div class="live-stat-label">Risk Remaining</div>
                                <div class="live-stat-value" id="riskRemaining">$0</div>
                            </div>
                        </div>
                        <div class="live-stat-card session-profit">
                            <div class="live-stat-icon">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <div class="live-stat-info">
                                <div class="live-stat-label">Session Profit</div>
                                <div class="live-stat-value" id="liveProfit">$0.00</div>
                            </div>
                        </div>
                        <div class="live-stat-card wagered">
                            <div class="live-stat-icon">
                                <i class="fas fa-coins"></i>
                            </div>
                            <div class="live-stat-info">
                                <div class="live-stat-label">Total Wagered</div>
                                <div class="live-stat-value" id="liveWagered">$0.00</div>
                            </div>
                        </div>
                        <div class="live-stat-card wins">
                            <div class="live-stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="live-stat-info">
                                <div class="live-stat-label">Wins</div>
                                <div class="live-stat-value" id="liveWins">0</div>
                            </div>
                        </div>
                        <div class="live-stat-card losses">
                            <div class="live-stat-icon">
                                <i class="fas fa-times-circle"></i>
                            </div>
                            <div class="live-stat-info">
                                <div class="live-stat-label">Losses</div>
                                <div class="live-stat-value" id="liveLosses">0</div>
                            </div>
                        </div>
                        <div class="live-stat-card win-rate">
                            <div class="live-stat-icon">
                                <i class="fas fa-percentage"></i>
                            </div>
                            <div class="live-stat-info">
                                <div class="live-stat-label">Win Rate</div>
                                <div class="live-stat-value" id="liveWinRate">0%</div>
                            </div>
                        </div>
                        <div class="live-stat-card current-streak">
                            <div class="live-stat-icon">
                                <i class="fas fa-fire"></i>
                            </div>
                            <div class="live-stat-info">
                                <div class="live-stat-label">Current Streak</div>
                                <div class="live-stat-value" id="currentStreak">-</div>
                            </div>
                        </div>
                        <div class="live-stat-card max-wins">
                            <div class="live-stat-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="live-stat-info">
                                <div class="live-stat-label">Max Wins</div>
                                <div class="live-stat-value" id="maxWins">0</div>
                            </div>
                        </div>
                        <div class="live-stat-card max-losses">
                            <div class="live-stat-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="live-stat-info">
                                <div class="live-stat-label">Max Losses</div>
                                <div class="live-stat-value" id="maxLosses">0</div>
                            </div>
                        </div>
                    </div>
                    <div class="profit-chart-container">
                        <canvas id="profitChart" width="400" height="200"></canvas>
                    </div>
                </div>
            </section>

            <!-- History Panel -->
            <section class="panel history-panel full-width-panel" id="historyPanel" style="display: none;">
                <div class="panel-header">
                    <h2><i class="fas fa-history"></i> Betting History</h2>
                    <div class="panel-actions">
                        <button class="btn btn-icon" id="clearHistory">
                            <i class="fas fa-trash"></i>
                        </button>
                        <button class="btn btn-icon" id="undoLastBet">
                            <i class="fas fa-undo"></i>
                        </button>
                    </div>
                </div>
                <div class="panel-content">
                    <div class="history-table-container">
                        <table class="history-table" id="historyTable">
                            <thead>
                                <tr>
                                    <th>Bet #</th>
                                    <th>Outcome</th>
                                    <th>Desired Profit</th>
                                    <th>Bet Size</th>
                                    <th>Balance After</th>
                                    <th>Sequence After</th>
                                </tr>
                            </thead>
                            <tbody id="historyBody">
                                <!-- History entries will be added here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Performance Analytics Panel -->
            <section class="panel analytics-panel full-width-panel" id="analyticsPanel" style="display: none;">
                <div class="panel-header">
                    <h2><i class="fas fa-chart-bar"></i> Performance Analytics</h2>
                    <div class="panel-actions">
                        <div class="view-toggle">
                            <button class="btn btn-toggle active" id="dashboardViewBtn" data-view="dashboard">
                                <i class="fas fa-chart-line"></i> Dashboard
                            </button>
                            <button class="btn btn-toggle" id="calendarViewBtn" data-view="calendar">
                                <i class="fas fa-calendar"></i> Calendar
                            </button>
                        </div>
                        <button class="btn btn-icon" id="closeAnalytics">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <div class="panel-content">
                    <!-- Dashboard View -->
                    <div class="analytics-view" id="dashboardView">
                        <!-- Filters -->
                        <div class="analytics-filters">
                            <div class="filter-group">
                                <label for="dateRangeFilter">Date Range</label>
                                <select id="dateRangeFilter" class="form-control">
                                    <option value="7">Last 7 days</option>
                                    <option value="30" selected>Last 30 days</option>
                                    <option value="90">Last 90 days</option>
                                    <option value="365">Last year</option>
                                    <option value="all">All time</option>
                                    <option value="custom">Custom range</option>
                                </select>
                            </div>
                            <div class="filter-group date-inputs" id="customDateInputs" style="display: none;">
                                <label for="startDate">From</label>
                                <input type="date" id="startDate" class="form-control">
                                <label for="endDate">To</label>
                                <input type="date" id="endDate" class="form-control">
                            </div>
                            <div class="filter-group">
                                <label for="gameFilter">Game Type</label>
                                <select id="gameFilter" class="form-control">
                                    <option value="">All games</option>
                                    <option value="roulette">Roulette</option>
                                    <option value="baccarat">Baccarat</option>
                                    <option value="blackjack">Blackjack</option>
                                    <option value="craps">Craps</option>
                                    <option value="mines">MINES</option>
                                    <option value="dice">DICE</option>
                                    <option value="limbo">LIMBO</option>
                                    <option value="crash">CRASH</option>
                                    <option value="flip">FLIP</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="casinoFilter">Casino</label>
                                <select id="casinoFilter" class="form-control">
                                    <option value="">All casinos</option>
                                </select>
                            </div>
                            <div class="filter-actions">
                                <button class="btn btn-primary" id="applyFilters">Apply Filters</button>
                                <button class="btn btn-secondary" id="resetFilters">Reset</button>
                            </div>
                        </div>

                        <!-- Equity Curve Chart -->
                        <div class="chart-container">
                            <canvas id="equityCurveChart" width="800" height="400"></canvas>
                        </div>

                        <!-- Performance Statistics Table -->
                        <div class="performance-stats">
                            <h3>Performance Summary</h3>
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-value" id="totalSessions">0</div>
                                    <div class="stat-label">Total Sessions</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="completedSessions">0</div>
                                    <div class="stat-label">Completed Sessions</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="totalProfit">$0.00</div>
                                    <div class="stat-label">Total Profit/Loss</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="avgSessionProfit">$0.00</div>
                                    <div class="stat-label">Avg Session P/L</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="totalWagered">$0.00</div>
                                    <div class="stat-label">Total Wagered</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="winRate">0%</div>
                                    <div class="stat-label">Win Rate</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="maxConsecutiveWins">0</div>
                                    <div class="stat-label">Max Consecutive Wins</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="maxConsecutiveLosses">0</div>
                                    <div class="stat-label">Max Consecutive Losses</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="avgSessionTime">00:00:00</div>
                                    <div class="stat-label">Avg Session Duration</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="profitableSessions">0%</div>
                                    <div class="stat-label">Profitable Sessions</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="largestWin">$0.00</div>
                                    <div class="stat-label">Largest Win</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="largestLoss">$0.00</div>
                                    <div class="stat-label">Largest Loss</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Calendar View -->
                    <div class="analytics-view" id="calendarView" style="display: none;">
                        <div class="calendar-header">
                            <button class="btn btn-icon" id="prevMonth">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <h3 id="currentMonth">January 2024</h3>
                            <button class="btn btn-icon" id="nextMonth">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        
                        <div class="calendar-container">
                            <div class="calendar-grid">
                                <div class="calendar-header-row">
                                    <div class="calendar-day-header">Sun</div>
                                    <div class="calendar-day-header">Mon</div>
                                    <div class="calendar-day-header">Tue</div>
                                    <div class="calendar-day-header">Wed</div>
                                    <div class="calendar-day-header">Thu</div>
                                    <div class="calendar-day-header">Fri</div>
                                    <div class="calendar-day-header">Sat</div>
                                </div>
                                <div class="calendar-days" id="calendarDays">
                                    <!-- Calendar days will be populated here -->
                                </div>
                            </div>
                        </div>

                        <div class="calendar-summary">
                            <div class="summary-card">
                                <h4 id="monthlyTitle">January 2024 Summary</h4>
                                <div class="monthly-stats">
                                    <div class="monthly-stat">
                                        <span class="stat-label">Total P/L:</span>
                                        <span class="stat-value" id="monthlyProfit">$0.00</span>
                                    </div>
                                    <div class="monthly-stat">
                                        <span class="stat-label">Sessions:</span>
                                        <span class="stat-value" id="monthlySessions">0</span>
                                    </div>
                                    <div class="monthly-stat">
                                        <span class="stat-label">Avg per day:</span>
                                        <span class="stat-value" id="monthlyAvgPerDay">$0.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            </div>
        </main>

        <!-- Toast Notifications -->
        <div class="toast-container" id="toastContainer">
            <!-- Toast notifications will appear here -->
        </div>

        <!-- Confirmation Modal -->
        <div class="modal-overlay" id="modalOverlay" style="display: none;">
            <div class="modal">
                <div class="modal-header">
                    <h3 id="modalTitle">Confirm Action</h3>
                    <button class="btn btn-icon" id="modalClose">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-content">
                    <p id="modalMessage">Are you sure?</p>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="modalCancel">Cancel</button>
                    <button class="btn btn-primary" id="modalConfirm">Confirm</button>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div class="modal-overlay" id="settingsOverlay" style="display: none;">
            <div class="modal settings-modal">
                <div class="modal-header">
                    <h3>Settings</h3>
                    <button class="btn btn-icon" id="settingsClose">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-content">

                    <div class="settings-section">
                        <h4><i class="fas fa-database"></i> Local Storage</h4>
                        <div class="storage-info">
                            <p><strong>Local Sessions:</strong> <span id="localSessionCount">0</span></p>
                            <p><strong>Storage Used:</strong> <span id="localStorageSize">0 KB</span></p>
                        </div>
                        <div class="button-group">
                            <button class="btn btn-secondary" id="exportAllLocal">
                                <i class="fas fa-download"></i> Export All Sessions
                            </button>
                            <button class="btn btn-warning" id="clearAllLocal">
                                <i class="fas fa-trash"></i> Clear All Local Data
                            </button>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="settingsCancel">Close</button>
                    <button class="btn btn-primary" id="saveSettings">Save Settings</button>
                </div>
            </div>
        </div>


        <!-- Authentication Modal -->
        <div class="modal-overlay" id="authOverlay" style="display: none;">
            <div class="modal auth-modal">
                <div class="modal-header">
                    <h3 id="authTitle">Sign In</h3>
                    <button class="btn btn-icon" id="authClose">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-content">
                    <div class="auth-tabs">
                        <button class="auth-tab active" data-tab="signin">Sign In</button>
                        <button class="auth-tab" data-tab="signup">Sign Up</button>
                    </div>
                    
                    <div class="auth-form" id="signinForm">
                        <div class="form-group">
                            <label for="signinEmail">Email</label>
                            <input type="email" id="signinEmail" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="signinPassword">Password</label>
                            <input type="password" id="signinPassword" class="form-control" required>
                        </div>
                        <div class="auth-error" id="signinError" style="display: none;"></div>
                        <button class="btn btn-primary full-width" id="signinBtn">Sign In</button>
                    </div>

                    <div class="auth-form" id="signupForm" style="display: none;">
                        <div class="form-group">
                            <label for="signupEmail">Email</label>
                            <input type="email" id="signupEmail" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="signupPassword">Password</label>
                            <input type="password" id="signupPassword" class="form-control" required minlength="6">
                        </div>
                        <div class="form-group">
                            <label for="confirmPassword">Confirm Password</label>
                            <input type="password" id="confirmPassword" class="form-control" required minlength="6">
                        </div>
                        <div class="auth-error" id="signupError" style="display: none;"></div>
                        <button class="btn btn-primary full-width" id="signupBtn">Sign Up</button>
                    </div>

                    <div class="auth-form" id="userProfile" style="display: none;">
                        <div class="user-info">
                            <div class="user-avatar">
                                <i class="fas fa-user-circle"></i>
                            </div>
                            <div class="user-details">
                                <h4 id="userEmail">user@example.com</h4>
                                <p class="user-status">
                                    <i class="fas fa-check-circle"></i>
                                    <span id="userSignedInDate">Signed in today</span>
                                </p>
                            </div>
                        </div>
                        <div class="cloud-stats">
                            <div class="cloud-stat">
                                <i class="fas fa-database"></i>
                                <span>
                                    <strong id="cloudSessionCount">0</strong> sessions synced
                                </span>
                            </div>
                            <div class="cloud-stat">
                                <i class="fas fa-shield-alt"></i>
                                <span>Data encrypted & secure</span>
                            </div>
                        </div>
                        <button class="btn btn-danger full-width" id="signoutBtn">
                            <i class="fas fa-sign-out-alt"></i> Sign Out
                        </button>
                    </div>

                    <div class="cloud-info" id="cloudInfo">
                        <p><i class="fas fa-cloud"></i> Cloud sync will save your sessions and stats online.</p>
                        <p><i class="fas fa-lock"></i> Your data is encrypted and secure.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bankroll Manager Modal -->
        <div class="modal-overlay" id="bankrollOverlay" style="display: none;">
            <div class="modal bankroll-modal">
                <div class="modal-header">
                    <h3><i class="fas fa-wallet"></i> Bankroll Manager</h3>
                    <button class="btn btn-icon" id="bankrollClose">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-content">
                    <!-- No Bankroll State -->
                    <div id="noBankroll" style="display: none;">
                        <div class="empty-state">
                            <i class="fas fa-wallet empty-icon"></i>
                            <h4>No Bankroll Created</h4>
                            <p>Create and manage your gambling bankroll with multiple pots for different games and purposes.</p>
                            <button class="btn btn-primary" id="createBankrollBtn">
                                <i class="fas fa-plus"></i> Create Bankroll
                            </button>
                        </div>
                    </div>

                    <!-- Bankroll Stats -->
                    <div id="bankrollStats" style="display: none;">
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-label">Total Allocated</span>
                                <span class="stat-value" id="totalAllocated">$0.00</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Savings</span>
                                <span class="stat-value" id="totalSavings">$0.00</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Net P&L</span>
                                <span class="stat-value" id="netProfitLoss">$0.00</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Pots at Risk</span>
                                <span class="stat-value" id="potsAtRisk">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Bankroll Creation Form -->
                    <div id="bankrollForm" style="display: none;">
                        <!-- Simplified Creation Flow -->
                        <div class="form-step" id="bankrollSetup">
                            <h4>Create New Bankroll</h4>
                            <div class="form-group">
                                <label for="totalBankroll">Total Bankroll Amount ($)</label>
                                <input type="number" id="totalBankroll" class="form-control" min="1" step="0.01" placeholder="Enter total amount...">
                                <small class="help-text">This amount will start as savings. Add gaming pots below.</small>
                            </div>
                            <div class="button-group">
                                <button class="btn btn-primary" id="createBankrollWithSavings">Create Bankroll</button>
                            </div>
                        </div>

                        <!-- Dynamic Pot Creation -->
                        <div class="form-step" id="potCreation" style="display: none;">
                            <h4>Add Gaming Pots</h4>
                            <div class="savings-info">
                                <p><i class="fas fa-piggy-bank"></i> <strong>Savings Pot:</strong> $<span id="savingsAmount">0.00</span></p>
                            </div>
                            <div id="dynamicPotsContainer"></div>
                            <div class="button-group">
                                <button class="btn btn-secondary" id="addNewPot">
                                    <i class="fas fa-plus"></i> Add Gaming Pot
                                </button>
                                <button class="btn btn-primary" id="finalizeBankroll">Finish Setup</button>
                            </div>
                        </div>
                    </div>

                    <!-- Pots Management -->
                    <div id="potsManagement" style="display: none;">
                        <div class="pots-header">
                            <h4>Your Pots</h4>
                            <div class="bankroll-actions">
                                <button class="btn btn-primary" id="addNewPotManagement">
                                    <i class="fas fa-plus"></i> Add New Pot
                                </button>
                                <button class="btn btn-secondary" id="transferMoney">
                                    <i class="fas fa-exchange-alt"></i> Transfer Money
                                </button>
                                <button class="btn btn-danger" id="deleteBankroll">
                                    <i class="fas fa-trash"></i> Delete Bankroll
                                </button>
                            </div>
                        </div>
                        <div class="pots-grid" id="potsGrid"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Transfer Money Modal -->
        <div class="modal-overlay" id="transferOverlay" style="display: none;">
            <div class="modal">
                <div class="modal-header">
                    <h3><i class="fas fa-exchange-alt"></i> Transfer Money</h3>
                    <button class="btn btn-icon" id="transferClose">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-content">
                    <div class="form-group">
                        <label for="fromPot">From Pot</label>
                        <select id="fromPot" class="form-control">
                            <option value="">Select source pot...</option>
                        </select>
                        <small class="help-text">Available balance: $<span id="availableBalance">0.00</span></small>
                    </div>
                    <div class="form-group">
                        <label for="toPot">To Pot</label>
                        <select id="toPot" class="form-control">
                            <option value="">Select destination pot...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="transferAmount">Amount ($)</label>
                        <input type="number" id="transferAmount" class="form-control" min="0.01" step="0.01" placeholder="Enter amount...">
                    </div>
                    <div class="form-group">
                        <label for="transferDescription">Description (Optional)</label>
                        <input type="text" id="transferDescription" class="form-control" placeholder="Transfer reason...">
                    </div>
                    <div class="button-group">
                        <button class="btn btn-secondary" id="cancelTransfer">Cancel</button>
                        <button class="btn btn-primary" id="confirmTransfer">Confirm Transfer</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add New Pot Modal -->
        <div class="modal-overlay" id="addNewPotOverlay" style="display: none;">
            <div class="modal">
                <div class="modal-header">
                    <h3><i class="fas fa-plus"></i> Add New Pot</h3>
                    <button class="btn btn-icon" id="addNewPotClose">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-content">
                    <div class="form-group">
                        <label for="newPotName">Pot Name:</label>
                        <input type="text" id="newPotName" class="form-control" placeholder="Enter pot name..." value="Gaming Pot">
                    </div>
                    <div class="form-group">
                        <label for="newPotAmount">Initial Amount ($):</label>
                        <input type="number" id="newPotAmount" class="form-control" min="0.01" step="0.01" placeholder="Enter initial amount...">
                    </div>
                    <div class="form-group casino-group">
                        <label for="newPotCasino">Casino:</label>
                        <select id="newPotCasino" class="form-control" onchange="bankrollUI.updateNewPotNameFromCasino(this)">
                            <option value="">None (Reserve Pot)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="fundingSource">Fund from:</label>
                        <select id="fundingSource" class="form-control">
                            <option value="">Select funding source...</option>
                        </select>
                    </div>
                    <div id="availableFunding" class="available-balance" style="display: none;">
                        Available: $<span id="availableFundingAmount">0.00</span>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="cancelNewPot">Cancel</button>
                    <button class="btn btn-primary" id="confirmNewPot">Create Pot</button>
                </div>
            </div>
        </div>

        <!-- Balance Update Modal -->
        <div class="modal-overlay" id="balanceUpdateOverlay" style="display: none;">
            <div class="modal balance-update-modal">
                <div class="modal-header">
                    <h3><i class="fas fa-balance-scale"></i> Update Balance</h3>
                    <button class="btn btn-icon" id="balanceUpdateClose">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-content">
                    <div class="balance-info">
                        <p><strong>App Balance:</strong> $<span id="appCurrentBalance">0.00</span></p>
                        <p class="help-text">Due to casino bonuses, multipliers, or other factors, your actual balance might differ from the app's calculated balance.</p>
                    </div>
                    
                    <div class="form-group">
                        <label for="actualBalance">Your Actual Balance ($)</label>
                        <input type="number" id="actualBalance" class="form-control" step="0.01" placeholder="Enter your current casino balance...">
                        <small class="help-text">Check your casino account for the exact balance</small>
                    </div>
                    
                    <div class="balance-difference" id="balanceDifference" style="display: none;">
                        <p><strong>Difference:</strong> <span class="difference-amount"></span></p>
                        <p class="difference-explanation"></p>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="skipBalanceUpdate">Skip</button>
                    <button class="btn btn-primary" id="confirmBalanceUpdate">Update Balance</button>
                </div>
            </div>
        </div>

        <!-- Session Detail Modal -->
        <div class="modal-overlay" id="sessionDetailOverlay" style="display: none;">
            <div class="modal session-detail-modal">
                <div class="modal-header">
                    <h3 id="sessionDetailTitle">Session Details</h3>
                    <button class="btn btn-icon" id="sessionDetailClose">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-content">
                    <div class="session-detail-content">
                        <!-- Session Info -->
                        <div class="session-info">
                            <h4>Session Information</h4>
                            <div class="info-grid">
                                <div class="info-item">
                                    <span class="info-label">Session Name:</span>
                                    <span class="info-value" id="detailSessionName">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Casino:</span>
                                    <span class="info-value" id="detailCasino">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Game Type:</span>
                                    <span class="info-value" id="detailGameType">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Duration:</span>
                                    <span class="info-value" id="detailDuration">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Final P/L:</span>
                                    <span class="info-value" id="detailProfitLoss">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Total Bets:</span>
                                    <span class="info-value" id="detailTotalBets">-</span>
                                </div>
                            </div>
                        </div>

                        <!-- Session Chart -->
                        <div class="session-chart">
                            <h4>Session P/L Chart</h4>
                            <canvas id="sessionDetailChart" width="600" height="300"></canvas>
                        </div>

                        <!-- Session Statistics -->
                        <div class="session-stats">
                            <h4>Session Statistics</h4>
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <span class="stat-label">Win Rate:</span>
                                    <span class="stat-value" id="detailWinRate">-</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Total Wagered:</span>
                                    <span class="stat-value" id="detailTotalWagered">-</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Consecutive Wins:</span>
                                    <span class="stat-value" id="detailConsecutiveWins">-</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Consecutive Losses:</span>
                                    <span class="stat-value" id="detailConsecutiveLosses">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="sessionDetailCancel">Close</button>
                </div>
            </div>
        </div>

        <!-- Session Selection Modal -->
        <div class="modal-overlay" id="sessionSelectionOverlay" style="display: none;">
            <div class="modal session-selection-modal">
                <div class="modal-header">
                    <h3 id="sessionSelectionTitle">Select Session</h3>
                    <button class="btn btn-icon" id="sessionSelectionClose">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-content">
                    <div class="session-selection-content">
                        <p id="sessionSelectionMessage">Multiple sessions found for this day. Select which session to view:</p>
                        <div class="session-list" id="sessionList">
                            <!-- Session items will be dynamically populated -->
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="sessionSelectionCancel">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Reshuffle Cycles Modal -->
        <div class="modal-overlay" id="reshuffleOverlay" style="display: none;">
            <div class="modal">
                <div class="modal-header">
                    <h3><i class="fas fa-random"></i> Reshuffle Cycles</h3>
                    <button class="btn btn-icon" id="reshuffleClose">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-content">
                    <div class="reshuffle-info">
                        <p><strong>Current remaining sum:</strong> $<span id="remainingSum">0.00</span></p>
                        <p class="help-text">This will redistribute the remaining cycle values into new equal-sum cycles.</p>
                    </div>
                    
                    <div class="form-group">
                        <label for="newCycleCount">Number of New Cycles</label>
                        <input type="number" id="newCycleCount" class="form-control" min="1" step="1" placeholder="Enter number of cycles...">
                        <small class="help-text">Each cycle will have equal total value</small>
                    </div>
                    
                    <div class="cycle-preview" id="cyclePreview" style="display: none;">
                        <p><strong>Preview:</strong></p>
                        <p>Each cycle will have <span id="valuePerCycle">0.00</span> per entry</p>
                        <p>4 entries per cycle: <span id="cycleValuePreview">0.00 + 0.00 + 0.00 + 0.00</span></p>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="reshuffleCancel">Cancel</button>
                    <button class="btn btn-primary" id="reshuffleConfirm">Reshuffle</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>